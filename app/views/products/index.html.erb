<div class="container">
  <div class="mt-4 mb-3">
    <h1>Tous les produits</h1>
  </div>

  <div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-2 g-lg-3">
    <% @products.each do |product| %>
      <div class="col">
        <div class="card rounded-4 shadow bg-light">
          <div class="card-body d-flex flex-column" style="height: 480px;">
            <% if product.photo.attached? %>
              <%= cl_image_tag product.photo.key, class: 'card-img-top rounded-3' %>
            <% else %>
              <%= image_tag product.image, class: 'card-img-top rounded-3' %>
            <% end %>
            <h3 class="card-title mt-3 d-inline-block text-truncate" style="max-width: 300px;"><%= product.name.capitalize %></h3>
            <p class="cart-text d-inline-block text-truncate" style="max-width: 300px;"><%= product.description %></p>
            <p class="cart-text">Prix : <%= product.price_per_day %>€ par jour</p>
            <p>⭐ <%= product.average_rating.present? ? product.average_rating.round(2) : "Ce produit n'a pas encore de note" %></p>
            <%= link_to 'Voir ce produit', product_path(product.id), class: 'btn btn-primary mt-auto text-light' %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <br>
  <%= link_to 'Back', root_path, class: 'mt-3 mb-5 btn btn-secondary' %>
</div>
